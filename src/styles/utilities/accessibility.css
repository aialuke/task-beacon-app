
/* src/styles/utilities/accessibility.css - Enhanced accessibility utility classes */
@layer utilities {
  /* ===== ENHANCED FOCUS UTILITIES ===== */
  .focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    transition: outline-color 0.2s ease;
  }

  .focus-visible:focus-visible {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 2px;
    box-shadow: 0 0 0 4px hsl(var(--primary) / 0.2);
  }

  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
  }

  .focus-ring-destructive {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-destructive focus-visible:ring-offset-2;
  }

  .focus-ring-success {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-success focus-visible:ring-offset-2;
  }

  /* ===== ENHANCED TOOLTIP UTILITIES ===== */
  .tooltip-touch {
    @apply visible opacity-100 transition-opacity duration-300;
  }

  @media (hover: none) {
    .tooltip-touch {
      @apply visible opacity-100;
    }
  }

  /* ===== SCREEN READER UTILITIES ===== */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .sr-only-focusable:focus {
    position: static;
    width: auto;
    height: auto;
    padding: 0.5rem;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    border: 2px solid hsl(var(--primary));
    border-radius: var(--radius-md);
    z-index: 9999;
  }

  /* ===== SKIP LINK UTILITIES ===== */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    padding: 8px;
    border-radius: var(--radius-md);
    text-decoration: none;
    z-index: 9999;
    font-weight: 600;
    transition: top 0.3s ease;
  }

  .skip-link:focus {
    top: 6px;
  }

  /* ===== RESPONSIVE UTILITIES ===== */
  @media (max-width: 640px) {
    .filter-dropdown-mobile {
      width: 40%;
    }

    .touch-target {
      min-height: 44px;
      min-width: 44px;
    }
  }

  @media (min-width: 641px) {
    .filter-dropdown-mobile {
      width: 25%;
    }

    .touch-target {
      min-height: 32px;
      min-width: 32px;
    }
  }
  
  /* ===== ENHANCED BORDER RADIUS UTILITIES ===== */
  .rounded-xl-container {
    border-radius: var(--radius-xl);
  }

  .rounded-full-container {
    border-radius: var(--radius-full);
  }

  /* ===== ENHANCED ICON UTILITIES ===== */
  .icon-filled {
    fill: currentColor;
  }

  .icon-stroked {
    stroke: currentColor;
    fill: none;
  }

  /* ===== MOTION PREFERENCES ===== */
  @media (prefers-reduced-motion: reduce) {
    .reduce-motion {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* ===== HIGH CONTRAST MODE UTILITIES ===== */
  @media (forced-colors: active) {
    .high-contrast-border {
      border: 1px solid CanvasText;
    }

    .high-contrast-bg {
      background: Canvas;
      color: CanvasText;
    }

    .high-contrast-focus {
      outline: 2px solid CanvasText;
      outline-offset: 2px;
    }
  }

  /* ===== COLOR CONTRAST UTILITIES ===== */
  .text-high-contrast {
    color: hsl(var(--foreground));
    font-weight: 500;
  }

  .bg-high-contrast {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
  }

  /* ===== KEYBOARD NAVIGATION ENHANCEMENTS ===== */
  .keyboard-only:focus:not(:focus-visible) {
    outline: none;
    box-shadow: none;
  }

  .keyboard-focusable {
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
  }

  /* ===== ANNOUNCEMENT UTILITIES ===== */
  .announce-polite {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }

  .announce-assertive {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }

  /* ===== DARK MODE ACCESSIBILITY ENHANCEMENTS ===== */
  .dark .focus-visible:focus-visible {
    box-shadow: 0 0 0 4px hsl(var(--primary) / 0.3);
  }

  .dark .skip-link {
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    box-shadow: var(--shadow-lg);
  }

  .dark .sr-only-focusable:focus {
    background-color: hsl(var(--card));
    color: hsl(var(--card-foreground));
    border-color: hsl(var(--primary));
    box-shadow: var(--shadow-lg);
  }

  /* ===== LIGHT MODE ACCESSIBILITY OVERRIDES ===== */
  .light .focus-visible:focus-visible {
    box-shadow: 0 0 0 4px rgba(54, 98, 227, 0.2);
  }

  .light .skip-link {
    background: #3662E3;
    color: white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .light .sr-only-focusable:focus {
    background-color: white;
    color: #1a202c;
    border-color: #3662E3;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  /* ===== ERROR AND SUCCESS ANNOUNCEMENT ===== */
  .announce-error {
    color: hsl(var(--destructive));
    font-weight: 600;
  }

  .announce-success {
    color: hsl(var(--success));
    font-weight: 600;
  }

  /* ===== LOADING STATE ACCESSIBILITY ===== */
  .loading-indicator {
    position: relative;
  }

  .loading-indicator::after {
    content: "Loading...";
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }
}
